{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","hoc/withAuthRedirect.js","components/Users/Users.module.css","components/common/Paginator/Paginator.module.css","components/common/Paginator/Paginator.jsx","components/Users/User.jsx","components/Users/Users.jsx","redux/users-selectors.js","components/Users/UsersContainer.jsx"],"names":["_objectWithoutProperties","source","excluded","key","i","target","sourceKeys","Object","keys","length","indexOf","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call","mapStateToPropsForRedirect","state","isAuth","auth","withAuthRedirect","Component","RedirectComponent","this","props","to","React","connect","module","exports","Paginator","currentPage","pageSize","totalItemsCount","portionSize","onPageChanged","portionNumber","setPortionNumber","pagesCount","Math","ceil","pages","push","portionCount","leftPortionPageNumber","rightPortionPageNumber","className","s","pagination","page","onClick","filter","p","map","selectedPage","User","user","id","photos","name","status","followed","followingIsProgress","unfollow","follow","body","main","avatar","src","small","userPhoto","text","disabled","some","itemId","btn","Users","totalUsersCount","users","isFetching","usersPortionNumber","setUserPortionNumber","title","Preloader","usersCont","getUsers","usersPage","getPageSize","getTotalUsersCount","getCurrentPage","getIsFetching","getFollowingIsProgress","getUsersPortionNumber","UsersContainer","requestUsers","render","match","params","undefined","Number","compose","setCurrentPage","toggleFollowingProgress","withRouter"],"mappings":"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","file":"static/js/7.b3979038.chunk.js","sourcesContent":["import objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import React from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nconst mapStateToPropsForRedirect = (state) => (\r\n    {\r\n        isAuth: state.auth.isAuth,\r\n    }\r\n)\r\n\r\nexport const withAuthRedirect = (Component) => {\r\n    class RedirectComponent extends React.Component {\r\n        render(){\r\n            if(!this.props.isAuth) return <Redirect to={'/login'} />;\r\n            return <Component {...this.props} />\r\n        }\r\n    }\r\n    let ConnectedAuthRedirectComponent = connect(mapStateToPropsForRedirect)(RedirectComponent);\r\n    return ConnectedAuthRedirectComponent;\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"users\":\"Users_users__pi2dK\",\"title\":\"Users_title__1oc51\",\"user\":\"Users_user__2GgVm\",\"body\":\"Users_body__UFmw-\",\"main\":\"Users_main__1ahMK\",\"text\":\"Users_text__ZE5J3\",\"avatar\":\"Users_avatar__2J-YJ\",\"name\":\"Users_name__37iyV\",\"status\":\"Users_status__tbtzV\",\"btn\":\"Users_btn__LMnfg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pagination\":\"Paginator_pagination__358Lc\",\"page\":\"Paginator_page__1Odef\",\"selectedPage\":\"Paginator_selectedPage__1eaKy\"};","import React from 'react'\r\nimport s from './Paginator.module.css';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n\r\nconst Paginator = ({ currentPage, pageSize, totalItemsCount, portionSize = 10, onPageChanged, portionNumber, setPortionNumber }) => {\r\n    \r\n    const pagesCount = Math.ceil(totalItemsCount / pageSize);\r\n\r\n    const pages = [];\r\n    for(let i = 1; i <= pagesCount;i++){\r\n        pages.push(i);\r\n    }\r\n\r\n    const portionCount = Math.ceil(pagesCount / portionSize);\r\n    const leftPortionPageNumber = (portionNumber - 1) * portionSize + 1;\r\n    const rightPortionPageNumber = portionNumber * portionSize;\r\n\r\n    return (\r\n        <div className={s.pagination}>\r\n            { portionNumber > 1 &&\r\n            <button className={s.page} onClick={() => { setPortionNumber(portionNumber - 1) }}>PREV</button> }\r\n            {pages.filter(p => p >= leftPortionPageNumber && p <= rightPortionPageNumber)\r\n            .map(p => {\r\n                    return <NavLink to={`/users/${p}`} onClick={() => {onPageChanged(p)}} className={`${s.page} ${currentPage === p && s.selectedPage}`} key={p} >{p}</NavLink>\r\n            })}\r\n            { portionCount > portionNumber &&\r\n            <button className={s.page} onClick={() => { setPortionNumber(portionNumber + 1) }}>NEXT</button> }\r\n        </div> \r\n    )\r\n}\r\n\r\nexport default Paginator;","import React from 'react'\r\nimport s from './Users.module.css';\r\nimport userPhoto from '../../assets/img/user.png'\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n\r\nconst User = ({user: {id, photos, name, status, followed}, followingIsProgress, unfollow, follow }) => {\r\n\r\n    return (\r\n        <div className={s.user}>\r\n            <div className={s.body}>\r\n                <div className={s.main}>\r\n                <NavLink to={`/profile/${id}`} className={s.avatar}>\r\n                    <img src={photos.small != null ? photos.small : userPhoto}/>\r\n                </NavLink>\r\n                    <div className={s.text}>\r\n                        <div className={s.name}>\r\n                            {name}\r\n                        </div>\r\n                        <div className={s.status}>\r\n                            {status}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                {followed \r\n                ? <button \r\n                    disabled={followingIsProgress.some(itemId => itemId === id)} \r\n                    className={s.btn} \r\n                    onClick={() => {unfollow(id)}}\r\n                ><span>unfollow</span></button> \r\n                : <button \r\n                    disabled={followingIsProgress.some(itemId => itemId === id)} \r\n                    className={s.btn} \r\n                    onClick={() => {follow(id)}} \r\n                ><span>follow</span></button>}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default User;","import React from 'react'\r\nimport s from './Users.module.css';\r\nimport Preloader from '../common/Preloader/Preloader';\r\nimport Paginator from '../common/Paginator/Paginator';\r\nimport User from './User';\r\n\r\n\r\nconst Users = ({currentPage, pageSize, totalUsersCount, onPageChanged, users, isFetching, usersPortionNumber, setUserPortionNumber, ...props}) => {\r\n\r\n    return (\r\n        <div className={s.users}>\r\n            <h2 className={s.title}>Users</h2>\r\n            <Paginator \r\n                currentPage={currentPage} \r\n                pageSize={pageSize} \r\n                onPageChanged={onPageChanged}\r\n                totalItemsCount={totalUsersCount}\r\n                portionNumber={usersPortionNumber}\r\n                setPortionNumber={setUserPortionNumber}\r\n            />\r\n            {isFetching \r\n            ? <Preloader/> \r\n            : <div className={s.usersCont}>\r\n                {users.map(user => <User key={user.id} user={user} followingIsProgress={props.followingIsProgress} follow={props.follow} unfollow={props.unfollow} />)}\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Users;","export const getUsers = (state) => {\r\n    return state.usersPage.users;\r\n}\r\n\r\nexport const getPageSize = (state) => {\r\n    return state.usersPage.pageSize;\r\n}\r\n\r\nexport const getTotalUsersCount = (state) => {\r\n    return state.usersPage.totalUsersCount;\r\n}\r\n\r\nexport const getCurrentPage = (state) => {\r\n    return state.usersPage.currentPage;\r\n}\r\n\r\nexport const getIsFetching = (state) => {\r\n    return state.usersPage.isFetching;\r\n}\r\n\r\nexport const getFollowingIsProgress = (state) => {\r\n    return state.usersPage.followingIsProgress;\r\n}\r\n\r\nexport const getUsersPortionNumber = (state) => {\r\n    return state.usersPage.usersPortionNumber;\r\n}\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { follow, unfollow, setCurrentPage, toggleFollowingProgress, requestUsers, setUserPortionNumber } from '../../redux/users-reducer';\r\nimport Users from './Users';\r\nimport { compose } from 'redux';\r\nimport { withAuthRedirect } from '../../hoc/withAuthRedirect';\r\nimport { getPageSize, getUsers, getTotalUsersCount, getIsFetching, getCurrentPage, getFollowingIsProgress, getUsersPortionNumber } from '../../redux/users-selectors';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\n\r\nclass UsersContainer extends React.Component {\r\n    \r\n    componentDidMount() {\r\n        let page = this.props.match.params.page;\r\n        if(page === undefined){\r\n            page = this.props.currentPage;\r\n        }\r\n        this.props.requestUsers(Number(page),this.props.pageSize);\r\n    }\r\n    \r\n    onPageChanged = (p) => {\r\n        this.props.requestUsers(p,this.props.pageSize);\r\n    }\r\n\r\n    render= () => {\r\n       return <Users \r\n        totalUsersCount={this.props.totalUsersCount}\r\n        pageSize={this.props.pageSize}\r\n        currentPage={this.props.currentPage}\r\n        onPageChanged={this.onPageChanged}\r\n        users={this.props.users}\r\n        unfollow={this.props.unfollow}\r\n        follow={this.props.follow}\r\n        followingIsProgress={this.props.followingIsProgress}\r\n        isFetching={this.props.isFetching}\r\n        usersPortionNumber={this.props.usersPortionNumber}\r\n        setUserPortionNumber={this.props.setUserPortionNumber}\r\n        />\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return{\r\n        users: getUsers(state),\r\n        pageSize: getPageSize(state),\r\n        totalUsersCount: getTotalUsersCount(state),\r\n        currentPage: getCurrentPage(state),\r\n        isFetching: getIsFetching(state),\r\n        followingIsProgress: getFollowingIsProgress(state),\r\n        usersPortionNumber: getUsersPortionNumber(state),\r\n    }\r\n}\r\n\r\n\r\nexport default compose(\r\n    \r\n    connect(mapStateToProps,{\r\n        follow,\r\n        unfollow,\r\n        setCurrentPage,\r\n        toggleFollowingProgress,\r\n        requestUsers,\r\n        setUserPortionNumber\r\n    }),\r\n    withRouter,\r\n    withAuthRedirect,\r\n)(UsersContainer);\r\n\r\n"],"sourceRoot":""}