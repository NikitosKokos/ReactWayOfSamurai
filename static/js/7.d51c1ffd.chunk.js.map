{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","hoc/withAuthRedirect.js","components/Users/Users.module.css","components/common/Paginator/Paginator.module.css","components/common/Paginator/Paginator.jsx","components/Users/User.jsx","components/Users/Users.jsx","redux/users-selectors.js","components/Users/UsersContainer.jsx"],"names":["_slicedToArray","arr","i","Array","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","unsupportedIterableToArray","TypeError","_objectWithoutProperties","source","excluded","key","target","sourceKeys","keys","indexOf","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call","mapStateToPropsForRedirect","state","isAuth","auth","withAuthRedirect","Component","RedirectComponent","this","props","to","React","connect","module","exports","Paginator","currentPage","pageSize","totalItemsCount","portionSize","onPageChanged","pagesCount","Math","ceil","pages","portionCount","useState","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","className","s","pagination","page","onClick","filter","p","map","selectedPage","User","user","id","photos","name","status","followed","followingIsProgress","unfollow","follow","body","main","avatar","src","small","userPhoto","text","disabled","some","itemId","btn","Users","totalUsersCount","users","isFetching","title","Preloader","usersCont","getUsers","usersPage","getPageSize","getTotalUsersCount","getCurrentPage","getIsFetching","getFollowingIsProgress","UsersContainer","requestUsers","render","match","params","Number","compose","setCurrentPage","toggleFollowingProgress","withRouter"],"mappings":"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","file":"static/js/7.d51c1ffd.chunk.js","sourcesContent":["import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import React from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nconst mapStateToPropsForRedirect = (state) => (\r\n    {\r\n        isAuth: state.auth.isAuth,\r\n    }\r\n)\r\n\r\nexport const withAuthRedirect = (Component) => {\r\n    class RedirectComponent extends React.Component {\r\n        render(){\r\n            if(!this.props.isAuth) return <Redirect to={'/login'} />;\r\n            return <Component {...this.props} />\r\n        }\r\n    }\r\n    let ConnectedAuthRedirectComponent = connect(mapStateToPropsForRedirect)(RedirectComponent);\r\n    return ConnectedAuthRedirectComponent;\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"users\":\"Users_users__pi2dK\",\"title\":\"Users_title__1oc51\",\"user\":\"Users_user__2GgVm\",\"body\":\"Users_body__UFmw-\",\"main\":\"Users_main__1ahMK\",\"text\":\"Users_text__ZE5J3\",\"avatar\":\"Users_avatar__2J-YJ\",\"name\":\"Users_name__37iyV\",\"status\":\"Users_status__tbtzV\",\"btn\":\"Users_btn__LMnfg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pagination\":\"Paginator_pagination__358Lc\",\"page\":\"Paginator_page__1Odef\",\"selectedPage\":\"Paginator_selectedPage__1eaKy\"};","import React from 'react'\r\nimport s from './Paginator.module.css';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n\r\nconst Paginator = ({ currentPage, pageSize, totalItemsCount, portionSize = 10, onPageChanged }) => {\r\n    \r\n    const pagesCount = Math.ceil(totalItemsCount / pageSize);\r\n\r\n    const pages = [];\r\n    for(let i = 1; i <= pagesCount;i++){\r\n        pages.push(i);\r\n    }\r\n\r\n    const portionCount = Math.ceil(pagesCount / portionSize);\r\n    const [portionNumber, setPortionNumber] = React.useState(1);\r\n    const leftPortionPageNumber = (portionNumber - 1) * portionSize + 1;\r\n    const rightPortionPageNumber = portionNumber * portionSize;\r\n\r\n    return (\r\n        <div className={s.pagination}>\r\n            { portionNumber > 1 &&\r\n            <button className={s.page} onClick={() => { setPortionNumber(portionNumber - 1) }}>PREV</button> }\r\n            {pages.filter(p => p >= leftPortionPageNumber && p <= rightPortionPageNumber)\r\n            .map(p => {\r\n                    return <NavLink to={`/users/${p}`} onClick={() => {onPageChanged(p)}} className={`${s.page} ${currentPage === p && s.selectedPage}`} key={p} >{p}</NavLink>\r\n            })}\r\n            { portionCount > portionNumber &&\r\n            <button className={s.page} onClick={() => { setPortionNumber(portionNumber + 1) }}>NEXT</button> }\r\n        </div> \r\n    )\r\n}\r\n\r\nexport default Paginator;","import React from 'react'\r\nimport s from './Users.module.css';\r\nimport userPhoto from '../../assets/img/user.png'\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n\r\nconst User = ({user: {id, photos, name, status, followed}, followingIsProgress, unfollow, follow }) => {\r\n\r\n    return (\r\n        <div className={s.user}>\r\n            <div className={s.body}>\r\n                <div className={s.main}>\r\n                <NavLink to={`/profile/${id}`} className={s.avatar}>\r\n                    <img src={photos.small != null ? photos.small : userPhoto}/>\r\n                </NavLink>\r\n                    <div className={s.text}>\r\n                        <div className={s.name}>\r\n                            {name}\r\n                        </div>\r\n                        <div className={s.status}>\r\n                            {status}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                {followed \r\n                ? <button \r\n                    disabled={followingIsProgress.some(itemId => itemId === id)} \r\n                    className={s.btn} \r\n                    onClick={() => {unfollow(id)}}\r\n                ><span>unfollow</span></button> \r\n                : <button \r\n                    disabled={followingIsProgress.some(itemId => itemId === id)} \r\n                    className={s.btn} \r\n                    onClick={() => {follow(id)}} \r\n                ><span>follow</span></button>}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default User;","import React from 'react'\r\nimport s from './Users.module.css';\r\nimport Preloader from '../common/Preloader/Preloader';\r\nimport Paginator from '../common/Paginator/Paginator';\r\nimport User from './User';\r\n\r\n\r\nconst Users = ({currentPage, pageSize, totalUsersCount, onPageChanged, users, isFetching, ...props}) => {\r\n\r\n    return (\r\n        <div className={s.users}>\r\n            <h2 className={s.title}>Users</h2>\r\n            <Paginator \r\n                currentPage={currentPage} \r\n                pageSize={pageSize} \r\n                onPageChanged={onPageChanged}\r\n                totalItemsCount={totalUsersCount} \r\n            />\r\n            {isFetching \r\n            ? <Preloader/> \r\n            : <div className={s.usersCont}>\r\n                {users.map(user => <User key={user.id} user={user} followingIsProgress={props.followingIsProgress} follow={props.follow} unfollow={props.unfollow} />)}\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Users;","export const getUsers = (state) => {\r\n    return state.usersPage.users;\r\n}\r\n\r\nexport const getPageSize = (state) => {\r\n    return state.usersPage.pageSize;\r\n}\r\n\r\nexport const getTotalUsersCount = (state) => {\r\n    return state.usersPage.totalUsersCount;\r\n}\r\n\r\nexport const getCurrentPage = (state) => {\r\n    return state.usersPage.currentPage;\r\n}\r\n\r\nexport const getIsFetching = (state) => {\r\n    return state.usersPage.isFetching;\r\n}\r\n\r\nexport const getFollowingIsProgress = (state) => {\r\n    return state.usersPage.followingIsProgress;\r\n}\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { follow, unfollow,setCurrentPage,toggleFollowingProgress,requestUsers } from '../../redux/users-reducer';\r\nimport Users from './Users';\r\nimport { compose } from 'redux';\r\nimport { withAuthRedirect } from '../../hoc/withAuthRedirect';\r\nimport { getPageSize,getUsers,getTotalUsersCount,getIsFetching,getCurrentPage,getFollowingIsProgress } from '../../redux/users-selectors';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\n\r\nclass UsersContainer extends React.Component {\r\n    \r\n    componentDidMount() {\r\n        let page = this.props.match.params.page;\r\n        if(page === undefined){\r\n            page = this.props.currentPage;\r\n        }\r\n        this.props.requestUsers(Number(page),this.props.pageSize);\r\n    }\r\n    \r\n    onPageChanged = (p) => {\r\n        this.props.requestUsers(p,this.props.pageSize);\r\n    }\r\n\r\n    render= () => {\r\n       return <Users \r\n        totalUsersCount={this.props.totalUsersCount}\r\n        pageSize={this.props.pageSize}\r\n        currentPage={this.props.currentPage}\r\n        onPageChanged={this.onPageChanged}\r\n        users={this.props.users}\r\n        unfollow={this.props.unfollow}\r\n        follow={this.props.follow}\r\n        followingIsProgress={this.props.followingIsProgress}\r\n        isFetching={this.props.isFetching}\r\n        />\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return{\r\n        users: getUsers(state),\r\n        pageSize: getPageSize(state),\r\n        totalUsersCount: getTotalUsersCount(state),\r\n        currentPage: getCurrentPage(state),\r\n        isFetching: getIsFetching(state),\r\n        followingIsProgress: getFollowingIsProgress(state),\r\n    }\r\n}\r\n\r\n\r\nexport default compose(\r\n    \r\n    connect(mapStateToProps,{\r\n        follow,\r\n        unfollow,\r\n        setCurrentPage,\r\n        toggleFollowingProgress,\r\n        requestUsers\r\n    }),\r\n    withRouter,\r\n    withAuthRedirect,\r\n)(UsersContainer);\r\n\r\n"],"sourceRoot":""}